{{ define "main" }}
<section class="hero">
  <div class="container">
    <h1>{{ .Site.Title }}</h1>
    <p class="tagline">{{ .Site.Params.tagline }}</p>
    <p class="description">{{ .Site.Params.description }}</p>
  </div>
</section>

<section class="latest-posts container">
  <h2>Latest Stories</h2>
  {{ $posts := where .Site.RegularPages "Section" "posts" }}
  <div class="post-grid">
    {{ range first 10 $posts }}
    <article class="post-preview">
      {{ with .Params.image }}
      <div class="thumbnail">
        <img src="{{ . | absURL }}" alt="{{ $.Title }}">
      </div>
      {{ end }}
      <div class="content">
        {{ with $.Params.category }}
        <span class="category">{{ . }}</span>
        {{ end }}
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        {{ with .Summary }}
        <p class="summary">{{ . }}</p>
        {{ end }}
        <div class="meta">
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
          <a href="{{ .Permalink }}" class="read-more">Read more &rarr;</a>
        </div>
      </div>
    </article>
    {{ else }}
    <div class="no-posts">
      <p>No stories yet. Check back soon for fascinating tales from history and around the world.</p>
    </div>
    {{ end }}
  </div>
</section>

{{ if gt (len $posts) 10 }}
<div class="view-all container">
  <a href="{{ "posts/" | relURL }}">View all stories &rarr;</a>
</div>
{{ end }}
{{ end }}
